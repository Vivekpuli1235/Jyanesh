<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

  // ✅ Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAgjQzG2w9lkx8S1OCIR3e-MNxILMN1rw",
    authDomain: "clientportal-ef181.firebaseapp.com",
    projectId: "clientportal-ef181",
    storageBucket: "clientportal-ef181.appspot.com",
    messagingSenderId: "427314875945",
    appId: "1:427314875945:web:17eb6479334bcb024c1638",
    databaseURL: "https://clientportal-ef181-default-rtdb.firebaseio.com"   <!-- ✅ required for Realtime DB -->
  };

  // ✅ Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // ✅ Save client data
  async function saveClient() {
    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    const gender = document.getElementById("gender").value;
    const height = document.getElementById("height").value;
    const weight = document.getElementById("weight").value;
    const phone = document.getElementById("phone").value;
    const city = document.getElementById("city").value;
    const activity = document.getElementById("activity").value;
    const goal = document.getElementById("goal").value;
    const medical = document.getElementById("medical").value;
    const mode = document.getElementById("mode").value;

    try {
      await push(ref(db, "clients"), {
        name,
        email,
        gender,
        height,
        weight,
        phone,
        city,
        activity,
        goal,
        medical,
        mode
      });
      alert("Client registered successfully!");
    } catch (error) {
      console.error("Error saving client: ", error);
    }
  }

  // ✅ Example: hook this function to a form
  document.getElementById("registerForm").addEventListener("submit", (e) => {
    e.preventDefault();
    saveClient();
    e.target.reset();
  });
</script>
